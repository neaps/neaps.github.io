{"componentChunkName":"component---src-pages-docs-js","path":"/docs/","webpackCompilationHash":"ca87c3c441f77d37eed5","result":{"data":{"allFile":{"nodes":[{"childMarkdownRemark":{"html":"<p><a href=\"https://circleci.com/gh/neaps/tide-predictor\"><img src=\"https://circleci.com/gh/neaps/tide-predictor.svg?style=svg\" alt=\"CircleCI\"></a> <a href=\"https://coveralls.io/github/neaps/tide-predictor?branch=master\"><img src=\"https://coveralls.io/repos/github/neaps/tide-predictor/badge.svg?branch=master\" alt=\"Coverage Status\"></a> <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Fneaps%2Ftide-predictor?ref=badge_shield\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Fneaps%2Ftide-predictor.svg?type=shield\" alt=\"FOSSA Status\"></a></p>\n<h1>Tide predictor</h1>\n<p>A Javascript tide harmonic calculator.</p>\n<h2>Warning</h2>\n<p><strong>Do not use calculations from this project for navigation, or depend on them in any situation where inaccuracies could result in harm to a person or property.</strong></p>\n<p>This project is <strong>very much</strong> in-progress, and even when it is finished, it is provided with no warantee of accuracy.</p>\n<p>Tide predictions are only as good as the harmonics data available, and these can be inconsistent and vary widely based on the accuracy of the source data and local conditions.</p>\n<p>The tide predictions do not factor events such as storms, surge, wind waves, uplift, or sadly, climate change.</p>\n<h1>Installation</h1>\n<p>Once published, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># yarn\nyarn install @neaps/tide-prediction\n\n#npm\nnpm install --save @neaps/tide-prediction</code></pre></div>\n<h1>Usage</h1>\n<p>Neaps requires that you <a href=\"#constituent-object\">provide your own tidal harmonics information</a> to generate a prediction.</p>\n<p>Because many constituent datum come with multiple phases (in the case of NOAA's data, they are <code class=\"language-text\">phase_local</code> and <code class=\"language-text\">phase_GMT</code>), there is a <code class=\"language-text\">phaseKey</code> option for choosing which to use.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> TidePrediction <span class=\"token keyword\">from</span> <span class=\"token string\">'@neaps/tide-prediction'</span>\n<span class=\"token keyword\">const</span> constituents <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    phase_GMT<span class=\"token punctuation\">:</span> <span class=\"token number\">98.7</span><span class=\"token punctuation\">,</span>\n    phase_local<span class=\"token punctuation\">:</span> <span class=\"token number\">313.7</span><span class=\"token punctuation\">,</span>\n    amplitude<span class=\"token punctuation\">:</span> <span class=\"token number\">2.687</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'M2'</span><span class=\"token punctuation\">,</span>\n    speed<span class=\"token punctuation\">:</span> <span class=\"token number\">28.984104</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//....there are usually many, read the docs</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">const</span> highLowTides <span class=\"token operator\">=</span> <span class=\"token function\">tidePrediction</span><span class=\"token punctuation\">(</span>constituents<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  phaseKey<span class=\"token punctuation\">:</span> <span class=\"token string\">'phase_GMT'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtremesPrediction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2019-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2019-01-10'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Tide prediction object</h2>\n<p>Calling <code class=\"language-text\">tidePrediction</code> will generate a new tide prediction object. It accepts the following arguments:</p>\n<ul>\n<li><code class=\"language-text\">constituents</code> - An array of <a href=\"#constituent-object\">constituent objects</a></li>\n<li>\n<p><code class=\"language-text\">options</code> - An object with one of:</p>\n<ul>\n<li><code class=\"language-text\">phaseKey</code> - The name of the parameter within constituents that is considered the \"phase\"</li>\n<li><code class=\"language-text\">offset</code> - A value to add to <strong>all</strong> values predicted. This is useful if you want to, for example, offset tides by mean high water, etc.</li>\n</ul>\n</li>\n</ul>\n<h3>Tide prediction methods</h3>\n<p>The returned tide prediction object has various methods. All of these return regular JavaScript objects.</p>\n<h4>High and low tide - <code class=\"language-text\">getExtremesPrediction</code></h4>\n<p>Returns the predicted high and low tides between a start and end date.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> startDate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> endDate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>startDate <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> tides <span class=\"token operator\">=</span> <span class=\"token function\">tidePrediction</span><span class=\"token punctuation\">(</span>constituents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtremesPrediction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  start<span class=\"token punctuation\">:</span> startDate<span class=\"token punctuation\">,</span>\n  end<span class=\"token punctuation\">:</span> endDate<span class=\"token punctuation\">,</span>\n  labels<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//optional human-readable labels</span>\n    high<span class=\"token punctuation\">:</span> <span class=\"token string\">'High tide'</span><span class=\"token punctuation\">,</span>\n    low<span class=\"token punctuation\">:</span> <span class=\"token string\">'Low tide'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>If you want predictions for a subservient station, first set the reference station in the prediction, and pass the <a href=\"#subservient-station\">subservient station offests</a> to the <code class=\"language-text\">getExtremesPrediction</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> tides <span class=\"token operator\">=</span> <span class=\"token function\">tidePrediction</span><span class=\"token punctuation\">(</span>constituents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExtremesPrediction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  start<span class=\"token punctuation\">:</span> startDate<span class=\"token punctuation\">,</span>\n  end<span class=\"token punctuation\">:</span> endDate<span class=\"token punctuation\">,</span>\n  offset<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    height_offset<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      high<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      low<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    time_offset<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      high<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      low<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>Options</h5>\n<p>The <code class=\"language-text\">getExtremesPrediction</code> accepts a single object with options:</p>\n<ul>\n<li><code class=\"language-text\">startDate</code> - **Required ** - The date &#x26; time to start looking for high and low tides</li>\n<li><code class=\"language-text\">endDate</code> - **Required ** - The date &#x26; time to stop looking for high and low tides</li>\n<li>\n<p><code class=\"language-text\">labels</code> - An object to define the human-readable labels for the tides</p>\n<ul>\n<li><code class=\"language-text\">high</code> - The human-readable label for high tides</li>\n<li><code class=\"language-text\">low</code> - The human-readable label for low tides</li>\n</ul>\n</li>\n<li><code class=\"language-text\">offset</code> - The offset values if these predictions are for a <a href=\"#subservient-station\">subservient station</a></li>\n</ul>\n<h5>Return values</h5>\n<p>High and low tides are returned as arrays of objects:</p>\n<ul>\n<li><code class=\"language-text\">time</code> - A Javascript Date object of the time</li>\n<li><code class=\"language-text\">level</code> - The water level</li>\n<li><code class=\"language-text\">high</code> - <strong>true</strong> if this is a high tide, <strong>false</strong> if not</li>\n<li><code class=\"language-text\">low</code> - <strong>true</strong> if this is a low tide, <strong>false</strong> if not</li>\n<li><code class=\"language-text\">label</code> - The human-readable label (by default, 'High' or 'Low')</li>\n</ul>\n<h4>Water level at time - <code class=\"language-text\">getWaterLevelAtTime</code></h4>\n<p>Gives you the predicted water level at a specific time.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> waterLevel <span class=\"token operator\">=</span> <span class=\"token function\">tidePrediction</span><span class=\"token punctuation\">(</span>constituents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getWaterLevelAtTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  time<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>Options</h5>\n<p>The <code class=\"language-text\">getWaterLevelAtTime</code> accepts a single object of options:</p>\n<ul>\n<li><code class=\"language-text\">time</code> - A Javascript date object of the time for the prediction</li>\n</ul>\n<h5>Return values</h5>\n<p>A single object is returned with:</p>\n<ul>\n<li><code class=\"language-text\">time</code> - A Javascript date object</li>\n<li><code class=\"language-text\">level</code> - The predicted water level</li>\n</ul>\n<h2>Data definitions</h2>\n<h3><a name=\"constituent-object\"></a>Constituent definition</h3>\n<p>Tidal constituents should be an array of objects with at least:</p>\n<ul>\n<li><code class=\"language-text\">name</code> - <strong>string</strong> - The NOAA constituent name, all upper-case.</li>\n<li><code class=\"language-text\">amplitude</code> - <strong>float</strong> - The constituent amplitude</li>\n<li><code class=\"language-text\">[phase]</code> - <strong>float</strong> - The phase of the constituent. Because several services provide different phase values, you can choose which one to use when building your tide prediction.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[\n  {\n    name: &#39;[constituent name]&#39;,\n    amplitude: 1.3,\n    phase: 1.33\n  },\n  {\n    name: &#39;[constituent name 2]&#39;,\n    amplitude: 1.3,\n    phase: 1.33\n  }\n]</code></pre></div>\n<h3><a name=\"subservient-station\"></a>Subservient station definitions</h3>\n<p>Some stations do not have defined harmonic data, but do have published offets and a reference station. These include the offsets in time or amplitude of the high and low tides. Subservient station definitions are objects that include:</p>\n<ul>\n<li>\n<p><code class=\"language-text\">height_offset</code> - <strong>object</strong> - An object of height offets, in the same units as the reference station.</p>\n<ul>\n<li><code class=\"language-text\">high</code> - <strong>float</strong> - The offset to be added to high tide (can be negative)</li>\n<li><code class=\"language-text\">low</code> - <strong>float</strong> - The offset to be added to low tide (can be negative)</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">time_offset</code> - <strong>object</strong> - An object of time offets, in number of minutes</p>\n<ul>\n<li><code class=\"language-text\">high</code> - <strong>float</strong> - The number of minutes to add to high tide times (can be negative)</li>\n<li><code class=\"language-text\">low</code> - <strong>float</strong> - The number of minutes to add to low tide times (can be negative)</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  height_offset: {\n    high: 1,\n    low: 2\n  },\n  time_offset: {\n    high: 1,\n    low: 2\n  }\n}</code></pre></div>\n<h1>Shout out</h1>\n<p>All the really hard math is based on the excellent <a href=\"https://flaterco.com/xtide\">Xtide</a> and <a href=\"https://github.com/sam-cox/pytides\">pytides</a>.</p>"}}]}},"pageContext":{"isCreatedByStatefulCreatePages":true}}}